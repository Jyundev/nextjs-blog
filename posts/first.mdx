---
title: "Next.js에서 세션 관리하기"
publishedAt: "2025-04-09"
summary: "첫 게시글"
---

상황 추천 방식
다양한 OAuth 로그인 필요 next-auth
단순한 사용자 정보만 저장 iron-session
쿠키 기반 인증 유지 원함 iron-session
자체 JWT 처리 직접 구현 (주의 필요)

콜백 함수 실행 시점
authorize() 로그인 요청 시
jwt() 로그인 성공 직후, 또는 세션 검증 시
session() 클라이언트가 세션 요청할 때 (페이지 이동, 새로고침 등)
signIn() 로그인 요청 시 실행 (허용 여부 결정)
authorized() 각 요청마다 인증된 사용자만 접근 가능하도록 검사할 때

useSession() **클라이언트 측(브라우저)**에서 세션을 가져올 때 사용

getSession() **서버 측(SSR/API Routes 등)**에서 세션을 가져올 때 사용

항목 useSession() getSession()
실행 위치 클라이언트(Client) 서버(Server)
사용 위치 React 컴포넌트 내부 getServerSideProps, API Routes 등
반환 값 { data, status } 형태의 훅 `Promise<Session
비동기 처리 내부적으로 자동 await 필요
자동 리렌더링 : 세션 변경 시 자동 업데이트 한 번만 호출됨
예시 용도 로그인 상태 확인, UI 렌더링 제어 SSR에서 로그인 상태 기반 데이터 로딩

import { useSession } from "next-auth/react";

export default function Dashboard() {
  const { data: session, status } = useSession();

if (status === "loading") {
return <div>로딩 중...</div>;
}

if (!session) {
return <div>로그인이 필요합니다.</div>;
}

return <div>{session.user.name}님 환영합니다!</div>;
}

// pages/profile.tsx
import { getSession } from "next-auth/react";

export async function getServerSideProps(context) {
  const session = await getSession(context);

if (!session) {
return {
redirect: {
destination: "/login",
permanent: false,
},
};
}

return {
props: { session },
};
}

상황 추천 함수
페이지 로드 전에 로그인 여부 검사 필요 (SSR) getSession()
로그인 상태에 따라 버튼/내용 조건부 렌더링 (CSR) useSession()
