---
title: "Next.js에서 Server Action과 API(route.ts), 언제 어떻게 써야 할까?"
publishedAt: "2026-01-04"
summary: "Next.js App Router에서 서버 로직을 URL 노출 기준으로 정리해본 경험"
tags: ["Next.js", "Frontend", "Architecture"]
---

프로젝트 아키텍처를 리팩토링하다가 문득 이런 생각이 들었다.

> “우리는 왜 이렇게 `/api`를 많이 만들고 있지?”

처음 Next.js를 쓸 때는 REST API 서버를 먼저 만들고, 그 위에 프론트를 얹는 방식이 너무 익숙했다.

그래서 자연스럽게 **무언가 서버 로직이 필요하면 `/api`부터 만들고 있었다.**

하지만 App Router를 제대로 쓰기 시작하면서 이 방식이 오히려 구조를 복잡하게 만들고 있다는 걸 느꼈다.

그래서 이번에 아키텍처를 정리하면서 **Server Action과 API(route.ts)의 역할을 다시 정의**해보기로 했다.

---

## Next.js 서버 로직

App Router 기준으로 보면 서버 로직을 작성하는 방법은 크게 세 가지가 있다.

- **Server Component**
- **Server Action (`"use server"`)**
- **Route Handler (`app/api/ .. /route.ts`)**

문제는 이 셋이 기능적으로 겹치는 부분이 많아서 “이건 뭐로 해야 하지?”라는 고민이 계속 생긴다는 점이다.

그래서 나는 기준을 하나로 줄였다.

> "이 로직은 URL로 노출돼야 하는가?”

이 질문 하나로 대부분의 선택이 정리된다.

- **URL로 직접 호출돼야 한다 → `route.ts`**
- **URL로 노출될 필요가 없다 → Server Action / Server Component**

CRUD 기준보다 이 기준이 훨씬 덜 헷갈린다.

---

## Route Handler(`route.ts`)

`app/api/**/route.ts`는 **URL을 가진 서버 엔드포인트**를 만든다.

```text
GET  /api/home/summary
POST /api/webhook/payment

```

즉, 이 주소는 브라우저나 외부 시스템에서 직접 호출할 수 있다.

그래서 route.ts는 다음 같은 경우에만 사용하는 게 좋다.

### 1. 외부 시스템이 호출해야 할 때

- OAuth / SSO callback

- 결제, 알림 Webhook

이건 URL이 없으면 아예 동작하지 않는다.

### 2. Next.js 앱 외부의 클라이언트가 호출해야 할 때

- 모바일 앱

- 별도의 어드민 프론트엔드

- 다른 레포의 웹 애플리케이션

이처럼 **Next.js 앱 밖에 있는 클라이언트가 URL을 통해 호출해야 하는 경우**에는 `route.ts` 기반 API가 필요하다.

### 3. BFF(Backend For Frontend)가 필요할 때

하나의 화면에 필요한 데이터를 서버에서 모아서 내려주고 싶은 경우다. route.ts는 프론트엔드 전용 백엔드(BFF) 역할을 한다.

#### 1. 화면 기준으로 데이터가 묶일 때

- 홈 화면
- 대시보드

#### 2. 여러 소스를 조합해야 할 때

- DB + 외부 API
- 사용자 정보 + 통계
- 권한/상태에 따른 조건 분기

#### 3. 캐싱/리밸리데이션을 화면 단위로 하고 싶을 때

예를 들어 홈 화면은 사용자 정보, 오늘의 다이어리, 포인트 상태 등 여러 데이터를 한 번에 보여준다.

이 경우, 각각을 따로 캐싱하는 대신 홈 화면 전용 API에서 다음처럼 설정할 수 있다.

```
export const revalidate = 60;
```

## Server Action

Server Action은 URL을 만들지 않는다. 대신 UI 이벤트를 서버에서 바로 처리한다.

```
"use server";

export async function createDiary(formData: FormData) {
  // DB insert
}

```

### Server Action이 잘 어울리는 경우는 다음과 같다.

- 버튼 클릭

- form submit

- 생성 / 수정 / 삭제

- 쿠키 / 세션을 다루는 로직

- 서비스 키, DB 직접 접근

여기서 가장 중요한 포인트는 이거다.

> 외부에서 이 로직을 URL로 호출할 이유가 없다면 굳이 API를 만들 필요가 없다.

---

## 우리 프로젝트에 적용해보면

우리 프로젝트에 적용해보면 우리 프로젝트는 별도의 백엔드 서버가 없고, Supabase를 사용하고 있다.

이 구조에서는 대부분의 로직을 URL로 노출할 필요가 없다.

#### 굳이 만들 필요 없는 API들

- POST /api/diary/create
- GET /api/diary/list
- GET /api/tag

이 로직들의 공통점은 사용자 본인 데이터, 내부 UI 흐름, DB 직접 접근 이다.

#### 이렇게 하는 게 더 단순하다

- features/diary/actions/createDiary.ts
- features/diary/actions/getDiaryList.ts
- features/tag/actions/getTags.ts

혹은 Server Component에서 바로 조회해도 충분하다.

---

## 마치며

Next.js App Router를 쓰다 보니 프론트엔드와 서버를 나눠서 생각하던 예전 방식이 더 이상 잘 맞지 않는다는 느낌을 받았다.

대신 요즘에는 **“이 로직을 굳이 외부에 열어둘 필요가 있을까?”** 를 먼저 고민하게 된다.

API를 먼저 만들기보다 노출 경계를 먼저 정하니, 코드도 단순해지고 구조도 훨씬 이해하기 쉬워졌다.
